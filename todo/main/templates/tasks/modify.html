{% extends "base_generic.html" %}

{% block header %}
        <script type="text/javascript">
            $(function () {
                $("#discard").click(function () {
                    window.location.href="/tasks/list.html";
                });
            });
        </script>
{% endblock %}

{% block body %}
        <h2>{% if obj %}Task {{ obj.id }} -- {{ obj.name }}{% else %}Create Task{% endif %}</h2>
        <p><span class="bold">Created:</span> {{ obj.date_created|date }}</p>
        <p><span class="bold">Due:</span> {{ obj.next_date|date }}</p>
        <form action="" method="POST">
            {% csrf_token %}
            {{ form }}
            <p>
                <input type="submit" value="Save">
                <input type="submit" name="closeafter" value="Save and Close">
                <input type="button" value="Close" id="discard">
            </p>
        </form>
        <h3>Statuses</h3>
        <table>
            <tr>
                <th>Date</th>
                <th>Text</th>
                <th>Completed</th>
            </tr>
            {% for status in obj.status_set.all %}
            <tr>
                <td>{{ status.date }}</td>
                <td>{{ status.text }}</td>
                <td>{% if status.complete %}Yes{% endif %}</td>
            </tr>
            {% endfor %}
        </table>
{% endblock %}